<!DOCTYPE html>
<html lang="lt">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stoikas Karate Klubas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="index.html"><img src="assets/img/logo_stoikas.svg" alt="Stoikas" style="height:40px;"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link active" href="index.html">Pradžia</a></li>
          <li class="nav-item"><a class="nav-link" href="kontaktai.html">Kontaktai</a></li>
          <li class="nav-item"><a class="nav-link" href="treniruociu-adresai.html">Treniruotės adresai</a></li>
          <li class="nav-item"><a class="nav-link" href="treniruociu-grafikai.html">Treniruotės grafikai</a></li>
          <li class="nav-item"><a class="nav-link" href="norintiems-pabandyti.html">Norintiems pabandyti</a></li>
          <li class="nav-item"><a class="nav-link" href="1-2proc-gpm-parama.html">1,2% GPM parama</a></li>
          <li class="nav-item"><a class="nav-link" href="egzaminu-technika.html">Egzaminų technika</a></li>
          <li class="nav-item"><a class="nav-link" href="remejai.html">Rėmėjai</a></li>
          <li class="nav-item"><a class="nav-link" href="nsa-projektas.html">NSA projektas</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container py-5">
    <h1 id="page-title" class="display-4 text-center mb-5">Kraunama...</h1>

    <h2 id="kaunas-title" class="mb-3">Kaunas...</h2>
    <p id="kaunas-intro" class="text-danger fw-bold"></p>
    <div id="kauno-lentele" class="table-responsive"></div>
    <p id="kaunas-legenda" class="mt-2"></p>
    <p id="grafikai-footnote-kaunas" class="text-danger"></p>

    <hr class="my-5">

    <h2 id="kedainiai-title" class="mb-3">Kėdainiai...</h2>
    <p id="kedainiai-intro" class="text-danger fw-bold"></p>
    <div id="kedainiu-lentele" class="table-responsive"></div>
    <p id="grafikai-footnote-kedainiai" class="text-danger"></p>
  </main>

  <footer class="bg-dark text-light py-4 mt-5">
    <div class="container text-center">
      <p class="mb-0">&copy; 2025 Stoikas Karate Klubas. Visos teisės saugomos.</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    fetch('/content/treniruociu-grafikai.md')
      .then(res => res.text())
      .then(md => {
        const get = (key) => {
          const match = md.match(new RegExp(`${key}:\s*"?([^"]+)"?`));
          return match ? match[1] : '';
        };

const parseFrontmatter = (key) => {
  const regex = new RegExp(`${key}:\\s*([\\s\\S]*?)(?=\\n\\w|\\n$)`, 'g');
  const match = md.match(regex);
  if (!match) return [];

  const block = match[0].split('\n').slice(1); // Skip key
  const rows = [];
  let current = [];

  for (const line of block) {
    const clean = line.trim();
    if (clean.startsWith('- cells:')) {
      if (current.length) rows.push(current);
      current = [];
    } else if (clean.startsWith('-')) {
      current.push(clean.replace(/^-/, '').trim().replace(/^["']|["']$/g, ''));
    }
  }
  if (current.length) rows.push(current);
  return rows;
};
;

        const buildTable = (rows) => {
          const headers = ["Treniruočių laikas", "Pirmadienis", "Antradienis", "Trečiadienis", "Ketvirtadienis", "Penktadienis"];
          return `
            <table class="table table-bordered text-center">
              <thead class="table-light">
                <tr>${headers.map(h => `<th>${h}</th>`).join('')}</tr>
              </thead>
              <tbody>
                ${rows.map(row => `<tr>${row.map(cell => `<td>${cell}</td>`).join('')}</tr>`).join('')}
              </tbody>
            </table>`;
        };

        document.getElementById('page-title').innerText = get('puslapio_pavadinimas');
        document.getElementById('kaunas-title').innerText = get('kaunas_title');
        document.getElementById('kaunas-intro').innerText = get('kaunas_intro');
        document.getElementById('kaunas-legenda').innerText = get('kaunas_legenda');
        document.getElementById('grafikai-footnote-kaunas').innerText = get('grafikai_pastaba_kaunas');

        document.getElementById('kedainiai-title').innerText = get('kedainiai_title');
        document.getElementById('kedainiai-intro').innerText = get('kedainiai_intro');
        document.getElementById('grafikai-footnote-kedainiai').innerText = get('grafikai_pastaba_kedainiai');

        document.getElementById('kauno-lentele').innerHTML = buildTable(parseTable('kaunas_lentele'));
        document.getElementById('kedainiu-lentele').innerHTML = buildTable(parseTable('kedainiai_lentele'));
      });
  </script>
</body>

</html>
